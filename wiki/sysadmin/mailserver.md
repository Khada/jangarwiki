Мэйлсерверийн талаар товчхон
============================

limnux мэйл листэнд [Баасандорж ахын бичсэн товч
танилцуулгыг](http://groups.google.com/group/limnux/browse_frm/thread/cc386929a9347c53/ed5fcb1a8c2c6fcf?tvc=1#ed5fcb1a8c2c6fcf)
ирээдүйн сисадминуудад хэрэг болуужин гээд кирилл болгон, бага зэрэг
сийрүүлэн "хөрвүүллээ".

----

Ер нь TCP/IP дээр ажилладаг серверүүд өөрийн гэсэн хэлтэй байдаг. Яг
бидний хэл ярианы хэл шиг үгийн сантай (тушаал), бичлэгийн дүрэмтэй
(синтакс) байдаг.

Мэйл сервер дээр үндсэндээ эхлээд:

1.  TCP 25 дугаар портон дээр ажиллаж SMTP ашиглан захиа илгээх, хүлээн
    авах
2.  ТCP 110 дугаар портон дээр ажиллаж POP3 ашиглан шуудангийн хайрцгийн
    үүрэг гүйцэтгэх

гэсэн хоёр төрлийн сервер програм (daemon) зайлшгүй ажиллаж байх ёстой
юм. Ингэж байж үндсэндээ захиа илгээх, хүлээн авах боломжтой болох
ёстой!

### SMTP - Simple Mail Transfer Protocol

-   Захиа илгээхэд ашиглах мэйл сервер болон захианы програмын хооронд
    холбогч протокол, бас мэйл серверүүд захиагаа харилцан солилцохдоо
    ашиглана.
-   EHLO, MAIL FROM, RCPT TO, DATA гэх мэт тушаалууд байна.

*SMTP гэснээс захиа ирэхгүй байна гээд IT-н хэлтсийн дарга нь гомдол
тавьсан чинь өөдөөс нь манай сүлжээ чинь wireless ашиглаж байгаа, өвөл
болж байна. Гадаа хүйтэн учир агаарт хөлдчихсөн байх шиг байна... Тэгээд
таны захиа чинь удаад байна гэж боссдоо хэлэн аргалж суухыг хараад татаж
унаж байж билээ. Дулаарангуут гэсээд хурдан ирэх үү гэж асууж байдаг,
дарга нь ч гэж дарга хэхэ. Радио долгион хөлдөх үү, таминь ээ?*

Захиа илгээж SMTP ашиглан ажлаа хийдэг \*никс дээр Postfix, Sendmail,
Qmail гэх мэт програмууд байна. Виндовс дээр бол Microsoft Exchange
Server, M-Daemon... гээд олон бий.

### POP3 - Postal office protocol

-   Мэйл серверээс захианы програм захиагаа татаж авах протокол. POP3
    гэдэг нь хувилбар 3 болно.

-   USER, PASS, STAT, RETR гэх мэт тушаалууд байна.

-   [http://en.wikipedia.org/wiki/Post\_Office\_Protocol](http://en.wikipedia.org/wiki/Post_Office_Protocol</p>)

-   [http://en.wikipedia.org/wiki/Simple\_Mail\_Transfer\_Protocol](http://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol)

Шуудангийн хайрцагны үүрэг гүйцэтгэгч серверүүд нь vpopmail, dovecot өөр
чинь юу билээ дээ бас бус юмнууд байдаг.

Үндсэндээ SMTP-ээр дамжин орж ирсэн захидалуудыг хэрэглэгчийн шуудангийн
хайрцаг руу хуваарилах, хэрэглэгчид захиагаа татаж авахад үйлчилдэг.

### Message Queue

Мэйл серверт гадагшаа дамжуулагдах гээд хүлээгдэж буй захиа файл
хэлбэрээр байхыг хэлж байгаа юм. Заримдаа message queue нь хэд хоногоор
цаад хүлээн авах сервертээ очиж чадахгүй байх үе байна.

Энэ нь цаад талын сервер нь ямар нэгэн асуудалтай байна гэсэн үг. Мэйл
сервер нь захиаг нэг л удаа дамжуулах гэж оролдохгүй нилээн хэдэн удаа
дамжуулах гэж оролддог юм. Серверийн тохиргоон дээр тохируулна даа.

### Email relay

Ихэвчлэн тохиргооны файлд IP хаяг зааж өгнө. Энэ нь заасан IP хаягаас
дурын хаяг руу тухайн мэйл серверээр дамжуулан захиа илгээх боломжийг
олгож байгаа гэсэн үг л дээ.

Энийг зааж өгөөгүй мэйл серверийг спам илгээгч гээд Open relay email
server гэж хэлдэг. Ийм серверүүдийн IP хаягийг бүртгэсэн жагсаалтыг
blacklist энэ тэр гээд байх шиг байгаа юм. Тэгэхээр мэйл серверийг
суулгахдаа энэ асуудлыг онцгой анхаарч суулгах хэрэгтэй шүү!

Open relay байна уу гэдгийг шалгадаг вэб зөндөөн
бий:[http://www.spamhelp.org/shopenrelay/](http://www.spamhelp.org/shopenrelay/</p>)

Өөрөө ч бас SMTP сайн мэддэг бол гараараа шалгачихна л даа...

### Web interface, web email server...

Web interface, web email server, web email гэх мэтийн ойлголтууд байна
аа...

Энэ нь зүгээр л мэйл сервер дээр суусан PHP, ASP гээд скрипт хэлүүд дээр
хийгдсэн динамик вэбсэйт юм. Юу хийх вэ гэхээр хэрэглэгчид энэ вэбээр
орж захиагаа шалгана, захиа явуулна.

Тодруулбал энэ вэбсайт нь мэйл сервертэй IMAP хэмээх хэлээр ярьж захиаг
вэб мэйл дээр татаж авч харуулах, SMTP ашиглан захиа илгээх ажлыг хийнэ.

За энд захиа татаж авах POP3, IMAP гэсэн хоёр юм гарч ирж байна уу?
Ялгаа нь бол POP3 хэтэрхий бүдүүлэг нөхөр л дөө. Жишээлбэл захиаг үзнэ
гэхээр заавал бүхлээр нь татаж авч харуулдаг.

Харин IMAP нь захианы толгой хэсгийг буюу From, To, Subject, Date гэх
мэтээс бүрдсэн мэдээллийг л эхлэн ялган харуулах боломжтой байдаг.
Заавал бүхлээр нь татахгүй. Энэ нь вэбийг захиатай холбох ажлыг
хялбарчлаад өгч байгаа юм. Ингэснээр бас серверийн бодолтонд ч бага
ачаалал өгнө.
