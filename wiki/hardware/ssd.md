# SSD #

Хуучин HDD-ээ SDD-ээр халах явцаа тэмдэглэв.

SSD-г товчхондоо сурталчилбал, HDD-ээс хурдаар олон дахин илүү,
хөнгөн, доргилтонд тэсвэртэй, цахилгаан бага иддэг. Технологи хөгжихийн
хэрээр SSD улам хямдарч, ажиллагаа улам найдвартай болсоор байна.

Технологийн хувьд HDD-ээс огт өөр. HDD цахилгаан соронзон хуурцаг
ашигладаг бол, SSD нь хөдөлгөөнт эд ангигүй, харин цахилгаан хэлхээний
иж бүрдлийг ашиглаж өгөгдөл хадгалдаг. Дотроо флаш санах ойн SLC, MLC болон
DRAM-д суурилсан гэх мэт төрөл зүйлтэй. Энгийн хэрэгцээнд MLC-г өргөнөөр
ашигладаг.

## Backup ##

Мэдээж эхлээд юмаа нэг нөөцлөөд авчих хэрэгтэй. Эргээд
SSD рүүгээ шууд хуулаад тавьчихад ч амар. Миний хувьд зөвхөн
`/home` хавтасаа зөөврийн хаарданд хуулж авсан.

    rsync -a --exclude='/.gvfs' /home/khada /media/thx/khada.backup

Gnome-н `.gvfs` гэх симлинк хуулагдахгүй алдаа гаргадаг учраас `exclude` гэж зааж өгнө.

[[dd]] тушаал ашиглан хаард дискээ бүхлээр нь эсвэл партишнаар нь хуулах,
image файл болгон архивлах боломжтой. Гэхдээ миний хувьд SSD дээр
партишнаа өөрөөр зохион байгуулж, үйлдлийн системээ шинээр суулгах
учраас `rsync` хангалттай байв.

## s/HDD/SSD/g ##

Тооцоолуурынхаа бөөрийг хагалаад HDD-ээ SSD-ээр солих. Яаж солихыг мэдэхгүй
байвал Youtube рүү ороод тооцоолуурынхаа нэрийн араас "HDD replace" гэж
бичээд хайхад заавар олдоно.

Хуучин HDD-ээ CDROM-ын үүрэнд "caddy" авч хийгээд давхар ашигласан ч болох ююм. Ингэвэл бас юунд хэрэгтэйг хойно өгүүлнэ.

## SSD тохиргоо ##

Хэдий SSD лаг ч, зарим нэг тохиргоог хийж өгөхгүй бол SSD-ий эдэлгээ
муудаж, нас богиносно гэдэг.

Гол зорилго нь, SSD рүү бичих давтамжийг бууруулах юм. Үндсэн
тохиргооноос гадна бичилтийг бууруулах хэд хэдэн аргыг өгүүлье.

### Фирмвэйр шинэчлэх ###

SSD үйлдвэрлэгчид төхөөрөмжийнхөө firmware-г ойр ойрхон шинэчлэн
гаргаж, үйлдлийг нь сайжруулж байдаг учраас шинэ firmware гарсан
эсэхийг үе үе шалгаж байвал зохино. Анх удаа суулгах гэж буй бол
мөн сүүлийн үеийн firmware шаардлагатай эсэхийг шалгаарай.

Хагас сарын өмнө захиалсан SSD маань ирсэн өдөр
шалгахад шинэ firmware хувилбар гарчихсан байсан. ISO-г нь
татаж аваад USB-д хуулаад бүүтлэж firmware-г нь шинэчлэв.

### Партишн ###
Ихээхэн бичилт хийгддэг партишнуудаа аль болох SSD-ээс тусгаарласан нь
зүгээр гэдэг юм билээ. Тухайлбал `/tmp`, `/var` хоёр байна.

Гайгүй раамтай бол `/tmp`-ээ `tmpfs` төрлийн партишн болгоод
санах ойд хийчихэж болно. Эсвэл өнөө хуучин HDD-ээ давхар
ашиглаж байвал тэнд тавьчихад ч болно.

`/var`-ыг ч гэсэн тусдаа партишн, болж өгвөл нөгөө HDD дээр,
гайгүй раамтай бол `/var/spool`, `/var/tmp`-ийг `tmpfs` болго.

За цаашилбал `/home/user/.thumbnails`, `/home/user/.cache`
болон вэб хөтөчийн кээш гэх мэт хөдөлгөөн ихтэй хавтаснуудыг
өөр партишн, хаард руу зөөчихөж болно.


### TRIM ###

Өгөгдөл устгахад үйлдлийн системийн түвшинд "устсан" гэж тэмдэглэх ч
угтаа цаана дискэн дээр (SSD диск биш ч энэ нэршлийг ашиглая) оршсон
хэвээр байдаг. SSD өгөгдөл дарж хуулдаггүй учраас хоосон зай эрж
олох шаардлагатай байдаг. Тиймээс төхөөрөмжийн түвшинд хэрэггүй
өгөгдлийг жинхнээсээ устгаж, зай чөлөөлж байх ёстой болдог.
Үйлдлийн систем диск рүү TRIM тушаал явуулж зай чөлөөлдөг байна.

SSD авахдаа TRIM дэмждэг эсэхийг шалгахад илүүдэхгүй.

`/etc/fstab`
руу ороод партишн бүрийн боломж дээр `discard`-ыг нэмж бичнэ.

    /dev/sda1  /   ext4    discard,errors=remount-ro  0  1

Ингэж өөрчлөх нь файл устах болгонд цаашаа TRIM тушаал явуулж
ачаалал нэмнэ гэж үздэг хүмүүс байна. Өөрөөр бол `fstrim` тушаалыг
`rc.local` болон `cron`-д бичиж өгөх аргууд бий.

### noatime ###

Үйлдлийн системээс файлд хандах болгонд хандалтын огноог бичиж
байдгийг болиулбал бичилт нэлээн багасна. Мөн л `/etc/fstab`-г өөрчилж,
`noatime` (no access time) заалтыг нэмнэ. Хавтасны хандалт бичихийг
`nodiratime`-аар мөн болиулж болно.
    
    /dev/sda1  /   ext4    noatime,nodiratime,discard,errors=remount-ro  0  1

### Оролт, гаралт хуваарилагчийг солих ###

Галзуу төхөөрөмжтэй болсон учраас хуучин HDD ашигладаг хуваарилагчаа
сольё.

Одооны хуваарилагчийг харвал:

    cat /sys/block/sda/queue/scheduler
    noop deadline [cfq]

cfq байна. deadline болгон сольё. `/etc/rc.local` файлд дараах
тушаалуудыг нэмнэ:

    echo deadline > /sys/block/sdX/queue/scheduler
    echo 1 > /sys/block/sdX/queue/iosched/fifo_batch

sdX-г тохирох нэрээр солихоо мартав.

### swap ашиглалтыг бууруулах ###

Санах ой ачааллах үед зарим зүйлсийг swap руу хуулж чөлөөлж байдаг.
swap-ыг аль болох бага хэрэглэж, дискээ хайрлахын тулд swap
ашиглалтыг багасга хэмээн тохируулж болно. swappiness гэж
1-ээс 100 хүртэл тоон илэрхийлэл байх бөгөөд үүнийг тэглэхэд л болно.

Ашиглаж буй үзүүлэлтээ харахдаа:

    cat /proc/sys/vm/swappiness
    60

`/etc/sysctl.conf` файлд дараах мөрийг нэм:

    vm.swappiness=0

### reboot ###

SSD чинь өнө мөнхөд (арав орчим жил?) амьдрах болтугай!
